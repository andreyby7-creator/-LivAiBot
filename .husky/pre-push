#!/usr/bin/env bash
# Pre-push hook for comprehensive quality checks
# Runs more expensive checks before pushing to remote

set -e

echo "ğŸš€ Running pre-push checks..."

# 1. Type check core-contracts
echo "  ğŸ” Type checking core-contracts..."
(cd core-contracts && pnpm run type-check) || {
  echo "  âŒ Type check failed"
  exit 1
}

# 2. Lint core-contracts
echo "  ğŸ“ Linting core-contracts..."
(cd core-contracts && pnpm run lint:canary) || {
  echo "  âŒ Lint failed"
  exit 1
}

# 3. Test core-contracts
echo "  ğŸ§ª Testing core-contracts..."
(cd core-contracts && pnpm run test:run) || {
  echo "  âŒ Tests failed"
  exit 1
}

# 4. Placeholder for architecture validation
echo "  ğŸ›ï¸  Architecture validation..."
echo "    (placeholder - not implemented yet)"

# 5. Placeholder for infra verification
echo "  ğŸ§± Infrastructure verification..."
echo "    (placeholder - not implemented yet)"

# 5. Check for security issues (optional)
# echo "  ğŸ”’ Checking for security issues..."
# pnpm run security:audit || {
#   echo "  âš ï¸  Security issues found (continuing)"
# }

echo "âœ… Pre-push checks passed!"

